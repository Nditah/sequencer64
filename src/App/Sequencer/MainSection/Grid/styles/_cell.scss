@use 'styles/colors' as *;
@use 'styles/mixins' as *;

.grid {
  @include full;
  touch-action: initial;
  padding: 0.25rem;
  display: grid;
  align-items: center;
  grid-template-columns: repeat(8, minmax(0, 1fr));
  grid-template-rows: repeat(8, minmax(0, 1fr));
  gap: 3px;
}

.cellWrapper {
  @include full;
}

.cell {
  @include full;
  cursor: pointer;
  opacity: 1;
  background: $color-none;
  transform: scale(1) rotate(0);
  transition: 200ms;
  transition-property: transform;

  &.pulse {
    @include turnOn;
    transform: scale(0.8) rotate(2deg);
  }
}

.bg,
.bgColor,
.border,
.slice,
.cursor {
  @include noEventsLayer(absolute);
}

.bgColor,
.border,
.slice,
.cursor {
  opacity: 0;
}

.bg {
  opacity: 1;
  background: $grey-dim;
}

.bgColor {
  left: 0;
  transform: scaleX(1);
  opacity: 0;
}

.cell.flashing {
  .border {
    animation: flashing 500ms alternate infinite;
  }
  &.pause {
    .border {
      animation: none;
    }
  }
}

.slice {
  @include flex(row, center, center);
  z-index: 2;
  padding: 0.25rem;
  transform: scale(0);
  transition: 250ms ease-out;

  &.slice-2,
  &.slice-3 {
    opacity: 1;
  }

  &.slice-2 {
    transform: scale(0.5);
  }

  &.slice-3 {
    transform: scale(1);
  }

  svg {
    @include strokeDefaultDark;
    width: 100%;
    height: 100%;
    stroke-width: 2px;
    fill: transparent;
    transform: rotate(0);
    transition: 300ms ease-out;
  }
}
.cell.pulse .slice svg {
  transition: none;
  transform: rotate(360deg);
}

.cursor {
  background: $grey-half;
}
.cell.flash {
  .cursor {
    @include turnOn;
  }
}
div[data-cursor='true'] {
  .cursor {
    animation: flashing 200ms alternate infinite;
  }
}

.sample-cells {
  @include noEventsLayer(absolute);
  padding: 0.25rem;
  display: grid;
  grid-template-columns: repeat(3, auto);
  grid-template-rows: repeat(3, auto);
  gap: 1px;
  opacity: 0.5;

  .sample-cell {
    color: $color-none;
    transform: scale(0.5);
    border: 1px solid;
    border-radius: 50%;
    transition: 200ms;
  }
}
.cell.flash .sample-cell,
.cell.pulse .sample-cell {
  transition: none;
  transform: scale(2);
}
